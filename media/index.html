<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Media Journal | Drumoak Capital</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#ffffff;--text:#111827;--muted:#6b7280;--line:#e5e7eb;--chip:#f3f4f6;--accent:#4db5ff;}
    *{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;}
    nav{background:#fff;border-bottom:1px solid var(--line);padding:.75rem 1.5rem;position:sticky;top:0;z-index:1000;}
    nav ul{list-style:none;margin:0;display:flex;gap:1.5rem;align-items:center;}
    nav a{color:var(--text);text-decoration:none;font-weight:600;}
    nav a:hover{color:var(--accent);}
    nav strong{font-size:1.15rem;margin-right:1rem;}
    main{flex:1;padding:40px 0;}
    .wrap{max-width:980px;margin:0 auto;padding:0 20px;}
    .header{border:1px solid var(--line);border-radius:16px;padding:24px;margin-bottom:24px;}
    h1{margin:0 0 6px;font-size:2rem;line-height:1.2;}
    .sub{color:var(--muted);margin:0;}
    .controls{display:grid;grid-template-columns:1fr 160px 180px 140px;gap:10px;margin:16px 0 8px;}
    .controls input,.controls select{border:1px solid var(--line);border-radius:12px;padding:10px;}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px;}
    .card{border:1px solid var(--line);border-radius:16px;padding:16px;}
    .title{font-weight:600;margin:0 0 4px;font-size:16px;}
    .meta{color:var(--muted);font-size:12px;margin:0 0 10px;}
    .why,.notes{font-size:14px;margin:8px 0;}
    .chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px;}
    .chip{background:var(--chip);border:1px solid var(--line);padding:4px 8px;border-radius:999px;font-size:12px;}
    .row{display:flex;gap:10px;align-items:center;justify-content:space-between;}
    .link{color:#111;text-decoration:none;border-bottom:1px dotted #111;}
    .stars{font-size:13px;letter-spacing:1px;color:#f59e0b;}
    .muted{color:var(--muted);}
    input,select{border:1px solid var(--line);border-radius:12px;padding:10px;width:100%;}
  </style>
</head>
<body>
<nav class="tpc-nav">
  <ul style="display:flex; gap:1.5rem; list-style:none; margin:0; padding:0;">
    <li><strong>Drumoak Capital</strong></li>
    <li><a href="/Drumoak-Capital/">Home</a></li>
    <li><a href="/Drumoak-Capital/About/">About</a></li>
    <li><a href="/Drumoak-Capital/portfolio/">Portfolio</a></li>
    <li><a href="/Drumoak-Capital/portfolio/short-term.html">Portfolio ST</a></li>
    <li><a href="/Drumoak-Capital/portfolio/long-term.html">Portfolio LT</a></li>
    <li><a href="/Drumoak-Capital/history/">History</a></li>
    <li><a href="/Drumoak-Capital/strategy/events.html">Strategy Events</a></li>
    <li><a href="/Drumoak-Capital/strategy/algorithm.html">Strategy Algorithm</a></li>
    <li><a href="/Drumoak-Capital/media/">Media</a></li>
  </ul>
</nav>
<main>
  <div class="wrap">
    <section class="header">
      <h1>Media Journal</h1>
      <p class="sub">Log articles, podcasts, videos, and books you’ve consumed — and why they stood out.</p>
      <div class="controls">
        <input id="q" placeholder="Search title, source, tags, notes…" />
        <select id="typeFilter">
          <option value="">All types</option>
          <option>Article</option>
          <option>Video</option>
          <option>Podcast</option>
          <option>Book</option>
        </select>
        <select id="sort">
          <option value="date_desc">Sort: Newest</option>
          <option value="date_asc">Sort: Oldest</option>
          <option value="rating_desc">Sort: Rating (high→low)</option>
          <option value="rating_asc">Sort: Rating (low→high)</option>
        </select>
        <select id="tagFilter"><option value="">All tags</option></select>
      </div>
    </section>

    <section id="list" class="grid" aria-live="polite"></section>
  </div>
</main>

<script>
/** --- Data model ------------------------------------------------------- */
const data = [
  {
    id: crypto.randomUUID(),
    type: "Podcast",
    date: "2025-08-20",
    title: "The Operating Leverage Playbook",
    source: "Invest Like the Best",
    link: "https://example.com/podcast",
    tags: ["business", "leverage"],
    why: "Clear framework for mapping fixed vs variable costs — useful for DECK/CCL recovery theses.",
    notes: "Key quote: ‘pricing power compounds operating leverage.’",
    rating: 5
  },
  {
    id: crypto.randomUUID(),
    type: "Article",
    date: "2025-08-12",
    title: "Revisiting 13F Drift Effects",
    source: "Alpha Architect",
    link: "https://example.com/article",
    tags: ["factor", "13F", "momentum"],
    why: "Evidence on post-disclosure flows — supports Buffett Bounce logic.",
    notes: "",
    rating: 4
  }
];

/** --- UI state & helpers ---------------------------------------------- */
const listEl = document.getElementById("list");
const qEl = document.getElementById("q");
const typeEl = document.getElementById("typeFilter");
const tagEl = document.getElementById("tagFilter");
const sortEl = document.getElementById("sort");

function starStr(n){ if(!n) return ""; return "★".repeat(n) + "☆".repeat(5-n); }

function renderFilters(){
  // Populate tag filter from current data
  const tags = [...new Set(data.flatMap(x => x.tags||[]))].sort();
  tagEl.innerHTML = '<option value="">All tags</option>' + tags.map(t=>`<option>${t}</option>`).join("");
}

function render(){
  const q = qEl.value.trim().toLowerCase();
  const t = typeEl.value;
  const tag = tagEl.value;
  const sort = sortEl.value;

  let rows = data.filter(x=>{
    const blob = [x.title,x.source,(x.tags||[]).join(" "),x.why,x.notes].join(" ").toLowerCase();
    const okQ = !q || blob.includes(q);
    const okT = !t || x.type===t;
    const okTag = !tag || (x.tags||[]).includes(tag);
    return okQ && okT && okTag;
  });

  rows.sort((a,b)=>{
    if(sort==="date_desc") return (b.date||"") > (a.date||"") ? 1 : -1;
    if(sort==="date_asc") return (a.date||"") > (b.date||"") ? 1 : -1;
    if(sort==="rating_desc") return (b.rating||0) - (a.rating||0);
    if(sort==="rating_asc") return (a.rating||0) - (b.rating||0);
    return 0;
  });

  listEl.innerHTML = rows.map(x=>cardHTML(x)).join("") || emptyHTML();
}

function cardHTML(x){
  const url = x.link ? `<a class="link" href="${x.link}" target="_blank" rel="noopener">Open link</a>` : '<span class="muted">No link</span>';
  const tags = (x.tags||[]).map(t=>`<span class="chip">${t}</span>`).join("");
  return `
    <article class="card">
      <div class="row">
        <div class="chip">${x.type}</div>
        <div class="stars" title="Rating">${starStr(x.rating||0)}</div>
      </div>
      <h3 class="title">${x.title}</h3>
      <p class="meta">${x.source ? x.source + " • " : ""}${x.date || ""}</p>
      <p class="why"><strong>Why it stood out:</strong> ${escapeHTML(x.why)}</p>
      ${x.notes ? `<p class="notes"><strong>Notes:</strong> ${escapeHTML(x.notes)}</p>` : ""}
      <div class="row">
        <div class="chips">${tags}</div>
        ${url}
      </div>
    </article>
  `;
}
function emptyHTML(){
  return `<div class="card"><p class="muted">No entries yet.</p></div>`;
}
function escapeHTML(s){ return (s||"").replace(/[&<>"']/g,m=>({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[m])); }
[qEl, typeEl, tagEl, sortEl].forEach(el => el.addEventListener("input", render));

/** init */
renderFilters(); render();
</script>
</body>
</html>
